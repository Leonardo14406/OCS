services:
  - type: web
    name: whatsapp-server
    runtime: docker
    plan: starter
    region: oregon
    branch: main
    dockerfilePath: ./Dockerfile
    dockerContext: .
    healthCheckPath: /healthz
    autoDeploy: true
    envVars:
      - key: PORT
        value: 10000
      - key: NODE_ENV
        value: production
      - key: CLIENT_PHONE_E164
        sync: false
      - key: BRAND_NAME
        value: AIDeX
      - key: BRAND_TAGLINE
        value: WhatsApp AI Assistant
      - key: NEXT_PUBLIC_ABSOLUTE_URL
        sync: false
      - key: API_KEY
        generateValue: true
      - key: MONGODB_URI
        sync: false
      - key: PUPPETEER_SKIP_CHROMIUM_DOWNLOAD
        value: true
      - key: PUPPETEER_EXECUTABLE_PATH
        value: /usr/bin/chromium
      - key: CHROME_BIN
        value: /usr/bin/chromium
      - key: CHROME_PATH
        value: /usr/bin/chromium
      - key: NODE_OPTIONS
        value: --max-old-space-size=2048
      - key: SKIP_NETWORK_CHECK
        value: false
